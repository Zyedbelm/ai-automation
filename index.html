<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Automatisation IA | Baptiste Zyed MEDDEB</title>
    <meta name="description" content="Expert en automatisation des processus métier avec l'IA. Make certifié niveau 5, 12+ ans d'expérience entrepreneuriale en Suisse.">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Fraunces:wght@600;700&display=swap" rel="stylesheet">
    
    <!-- Supabase Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- Stripe Checkout -->
    <script src="https://js.stripe.com/v3/"></script>
    <!-- Config (copiez config.example.js en config.js et renseignez les valeurs) -->
    <script src="config.js?v=20250127"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary: #64748b;
            --accent: #f59e0b;
            --success: #059669;
            --white: #ffffff;
            --gray-50: #f8fafc;
            --gray-100: #f1f5f9;
            --gray-900: #0f172a;
            --shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        }

        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            color: var(--gray-900);
            background: var(--white);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        /* Navigation */
        nav {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--gray-100);
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .logo {
            font-family: 'Fraunces', serif;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
            text-decoration: none;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
            align-items: center;
        }

        .nav-links a {
            color: var(--secondary);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .nav-links a:hover {
            color: var(--primary);
        }

        .nav-cta {
            background: var(--primary);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .nav-cta:hover {
            background: var(--primary-dark);
            transform: translateY(-1px);
        }

        /* Hero Section */
        .hero {
            padding: 8rem 0 4rem;
            background: linear-gradient(135deg, var(--gray-50) 0%, var(--white) 100%);
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 50%;
            height: 100%;
            background: url('https://images.unsplash.com/photo-1551434678-e076c223a692?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80') center/cover;
            opacity: 0.1;
            z-index: 1;
        }

        .hero-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            align-items: center;
            position: relative;
            z-index: 2;
        }

        .hero-text h1 {
            font-family: 'Fraunces', serif;
            font-size: 3.5rem;
            font-weight: 700;
            line-height: 1.1;
            margin-bottom: 1.5rem;
            color: var(--gray-900);
        }

        .hero-text .highlight {
            color: var(--primary);
        }

        .hero-text p {
            font-size: 1.25rem;
            color: var(--secondary);
            margin-bottom: 2rem;
            line-height: 1.6;
        }

        .hero-cta {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 1rem 2rem;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            text-decoration: none;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            text-align: center;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
            box-shadow: var(--shadow-sm);
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .btn-secondary {
            background: white;
            color: var(--primary);
            border: 2px solid var(--primary);
        }

        .btn-secondary:hover {
            background: var(--primary);
            color: white;
        }

        .hero-image {
            position: relative;
        }

        .hero-image img {
            width: 100%;
            border-radius: 16px;
            box-shadow: var(--shadow);
        }

        .credentials {
            display: flex;
            gap: 2rem;
            margin-top: 3rem;
            flex-wrap: wrap;
        }

        .credential {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--secondary);
            font-size: 0.9rem;
        }

        .credential .icon {
            width: 20px;
            height: 20px;
            background: var(--accent);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.7rem;
        }

        /* Calculator Section */
        .calculator-section {
            padding: 6rem 0;
            background: var(--white);
        }

        .section-header {
            text-align: center;
            margin-bottom: 4rem;
        }

        .section-header h2 {
            font-family: 'Fraunces', serif;
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--gray-900);
        }

        .section-header p {
            font-size: 1.25rem;
            color: var(--secondary);
            max-width: 600px;
            margin: 0 auto;
        }

        .calculator-card {
            background: white;
            border-radius: 16px;
            padding: 3rem;
            box-shadow: var(--shadow);
            max-width: 700px;
            margin: 0 auto;
            border: 1px solid var(--gray-100);
        }

        .form-grid {
            display: grid;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .form-group label {
            font-weight: 600;
            color: var(--gray-900);
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            padding: 1rem;
            border: 2px solid var(--gray-100);
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
            font-family: inherit;
            line-height: 1.5;
        }

        .form-group textarea {
            padding: 1rem 1.2rem;
            resize: vertical;
            min-height: 120px;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary);
        }

        .calculator-result {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 2rem;
            border-radius: 12px;
            text-align: center;
            margin-top: 2rem;
            display: none;
        }

        .result-main {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .result-label {
            font-size: 1.1rem;
            opacity: 0.9;
            margin-bottom: 1rem;
        }

        .result-details {
            background: rgba(255, 255, 255, 0.1);
            padding: 1.5rem;
            border-radius: 8px;
            margin: 1rem 0;
        }

        .email-capture {
            margin-top: 2rem;
            display: none;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            border: 2px solid var(--primary);
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 8px 32px rgba(37, 99, 235, 0.15);
            position: relative;
            overflow: hidden;
        }

        .email-capture::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
        }

        .email-capture h3 {
            color: var(--primary);
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            text-align: center;
        }

        .email-capture p {
            color: var(--secondary);
            font-size: 1rem;
            text-align: center;
            margin-bottom: 1.5rem;
            font-weight: 500;
        }

        .email-form {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
            align-items: center;
        }

        .email-form input {
            flex: 1;
            padding: 1rem 1.2rem;
            border: 2px solid rgba(255, 255, 255, 0.8);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.95);
            color: var(--gray-900);
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .email-form input:focus {
            outline: none;
            border-color: var(--primary);
            background: white;
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .email-form button {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border: none;
            padding: 1.2rem 2.5rem;
            border-radius: 8px;
            font-weight: 700;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
            white-space: nowrap;
        }

        .email-form button:hover {
            background: linear-gradient(135deg, var(--primary-dark), #1e40af);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(37, 99, 235, 0.4);
        }

        /* Services Section */
        .services-section {
            padding: 6rem 0;
            background: var(--gray-50);
        }

        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin-top: 4rem;
        }

        .service-card {
            background: white;
            padding: 2.5rem;
            border-radius: 16px;
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--gray-100);
            transition: all 0.3s ease;
            position: relative;
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .service-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow);
        }

        .service-card.featured {
            border-color: var(--primary);
            transform: scale(1.05);
        }

        .service-badge {
            position: absolute;
            top: -12px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--accent);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .service-card h3 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--gray-900);
        }

        .service-price {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary);
            margin: 1rem 0;
        }

        .service-price .original {
            font-size: 1.5rem;
            text-decoration: line-through;
            color: var(--secondary);
            margin-right: 0.5rem;
        }

        .service-features {
            list-style: none;
            margin: 1.5rem 0;
        }

        .service-features li {
            padding: 0.5rem 0;
            position: relative;
            padding-left: 1.5rem;
        }

        .service-features li::before {
            content: '✓';
            position: absolute;
            left: 0;
            color: var(--success);
            font-weight: bold;
        }

        .service-card .btn {
            margin-top: auto;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Testimonials Section */
        .testimonials-section {
            padding: 6rem 0;
            background: #fafafa;
        }

        .testimonials-carousel {
            margin-top: 4rem;
            position: relative;
            overflow: hidden;
        }

        .carousel-container {
            position: relative;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .carousel-track {
            display: flex;
            transition: transform 0.8s cubic-bezier(0.25, 0.8, 0.25, 1);
            gap: 1.5rem;
            padding: 2rem 0;
            align-items: center;
            width: calc(420px * 4 + 1.5rem * 3); /* 4 cards + 3 gaps */
        }

        .testimonial-slide {
            flex: 0 0 420px;
            position: relative;
            transition: all 0.6s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        .testimonial-slide.active {
            z-index: 10;
        }

        .testimonial-slide.prev::after,
        .testimonial-slide.next::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(128, 128, 128, 0.4);
            border-radius: 20px;
            pointer-events: none;
            z-index: 5;
        }

        .testimonial-card {
            background: #ffffff;
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
            border: 1px solid rgba(0, 0, 0, 0.05);
            height: auto;
            display: flex;
            flex-direction: column;
            transition: all 0.4s ease;
            position: relative;
            overflow: visible;
        }

        .testimonial-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            border-radius: 16px 16px 0 0;
        }

        .testimonial-slide.active .testimonial-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 48px rgba(0, 0, 0, 0.12);
        }


        .testimonial-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1.5rem;
            position: relative;
            z-index: 2;
        }

        .client-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .client-photo {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            overflow: hidden;
            border: 2px solid rgba(0, 0, 0, 0.08);
            flex-shrink: 0;
        }

        .client-photo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .placeholder-photo {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #8B4513, #D2691E);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.1rem;
        }

        .client-info h4 {
            font-weight: 700;
            color: var(--gray-900);
            margin-bottom: 0.25rem;
            font-size: 1.1rem;
        }

        .client-info p {
            color: var(--primary);
            font-weight: 600;
            font-size: 0.9rem;
        }

        .client-website {
            color: var(--secondary);
            font-size: 0.8rem;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.25rem;
            margin-top: 0.25rem;
            transition: color 0.3s ease;
        }

        .client-website:hover {
            color: var(--primary);
        }

        .rating {
            text-align: right;
            display: flex;
            flex-direction: column;
            align-items: flex-end;
        }

        .stars {
            color: #fbbf24;
            font-size: 1rem;
            margin-bottom: 0.25rem;
            letter-spacing: 1px;
        }

        .rating-number {
            font-size: 0.85rem;
            color: var(--secondary);
            font-weight: 600;
            background: var(--gray-50);
            padding: 0.2rem 0.5rem;
            border-radius: 12px;
        }

        .testimonial-content {
            flex: 1;
            margin-bottom: 1.5rem;
            overflow: visible;
        }

        .testimonial-preview {
            display: none;
        }

        .testimonial-full {
            display: block;
        }

        /* Hide read-more button since we show full content */
        .testimonial-card .read-more-btn {
            display: none;
        }

        .reference-card .read-more-btn {
            display: none;
        }

        .testimonial-preview p,
        .testimonial-full p {
            color: var(--gray-700);
            line-height: 1.6;
            margin-bottom: 0.75rem;
            font-style: italic;
            font-size: 0.95rem;
        }

        .testimonial-full p:last-child {
            margin-bottom: 0;
        }

        .read-more-btn {
            background: var(--primary);
            border: none;
            color: white;
            font-weight: 500;
            cursor: pointer;
            padding: 0.375rem 0.75rem;
            border-radius: 8px;
            font-size: 0.8rem;
            transition: all 0.3s ease;
            margin-top: 0.5rem;
        }

        .read-more-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
        }

        .services-tag {
            margin-top: auto;
            padding-top: 1rem;
            border-top: 1px solid var(--gray-100);
        }

        .services-tag span {
            font-size: 0.8rem;
            color: var(--secondary);
            background: var(--gray-50);
            padding: 0.4rem 0.8rem;
            border-radius: 20px;
            display: inline-block;
        }

        /* Reference cards specific styles */
        .reference-card.testimonial-card {
            text-align: center;
        }

        .project-showcase {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            gap: 2rem;
            margin: 1rem 0;
        }

        .automation-flow {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .flow-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            padding: 1rem;
            background: var(--gray-50);
            border-radius: 12px;
            flex: 1;
            min-width: 80px;
        }

        .step-icon {
            font-size: 1.5rem;
        }

        .flow-step span {
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--secondary);
            text-align: center;
        }

        .flow-arrow {
            font-size: 1.2rem;
            color: var(--primary);
            font-weight: bold;
        }

        .automation-processes {
            display: flex;
            flex-direction: column;
            gap: 0.4rem;
            margin-bottom: 1rem;
        }

        .process-row {
            display: flex;
            justify-content: space-between;
            gap: 0.4rem;
        }

        .process-item {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.25rem;
            padding: 0.6rem 0.4rem;
            background: linear-gradient(135deg, var(--gray-50), #f8fafc);
            border-radius: 8px;
            border: 1px solid var(--gray-100);
            transition: all 0.3s ease;
        }

        .process-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .process-icon {
            font-size: 1.3rem;
            margin-bottom: 0.2rem;
        }

        .process-item span {
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--secondary);
            text-align: center;
            line-height: 1.1;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.5rem;
        }

        .metric-card {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 0.8rem 0.6rem;
            border-radius: 10px;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .metric-card:hover {
            transform: scale(1.05);
        }

        .metric-card .metric-number {
            display: block;
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 0.3rem;
        }

        .metric-card .metric-label {
            font-size: 0.75rem;
            opacity: 0.9;
            line-height: 1.1;
        }

        .carousel-navigation {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            margin-top: 2rem;
        }

        .carousel-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 2px solid var(--primary);
            background: white;
            color: var(--primary);
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .carousel-btn:hover {
            background: var(--primary);
            color: white;
        }

        .carousel-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .carousel-dots {
            display: flex;
            gap: 0.5rem;
        }

        .dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--gray-300);
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .dot.active {
            background: var(--primary);
        }

        .company-logo {
            width: 40px;
            height: 40px;
            margin: 0;
            background: var(--primary);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: white;
            font-size: 0.8rem;
            overflow: hidden;
        }

        .company-logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            padding: 0.25rem;
        }

        .logo-text {
            font-size: 0.6rem;
            font-weight: 600;
            text-align: center;
            line-height: 1.1;
        }

        .airloop-logo {
            background: linear-gradient(135deg, #1e3a8a, #3b82f6);
        }

        .bao-logo {
            background: linear-gradient(135deg, #dc2626, #ef4444);
        }

        .genie-logo {
            background: white;
            border: 1px solid var(--gray-200);
        }

        .testimonial-logo {
            flex-shrink: 0;
        }

        .testimonial-logo .company-logo {
            width: 40px;
            height: 40px;
            margin: 0;
        }

        .reference-content h4 {
            font-weight: 700;
            color: var(--gray-900);
            margin-bottom: 0.5rem;
        }

        .reference-content .company {
            color: var(--primary);
            font-weight: 600;
            margin-bottom: 1rem;
        }

        /* About Section */
        .about-section {
            padding: 6rem 0;
            background: white;
        }

        .about-content {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 4rem;
            align-items: center;
        }

        .about-image {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .about-image img {
            width: 280px;
            height: 280px;
            object-fit: cover;
            border-radius: 50%;
            box-shadow: 0 20px 40px rgba(37, 99, 235, 0.15);
            border: 4px solid white;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .about-image img:hover {
            transform: scale(1.05);
            box-shadow: 0 25px 50px rgba(37, 99, 235, 0.25);
        }

        .about-text h2 {
            font-family: 'Fraunces', serif;
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--gray-900);
        }

        .about-text .role {
            color: var(--primary);
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 1rem;
        }

        .about-text p {
            color: var(--secondary);
            margin-bottom: 1.5rem;
            line-height: 1.7;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin: 2rem 0;
        }

        .stat-item {
            text-align: center;
            padding: 1rem;
            background: var(--gray-50);
            border-radius: 8px;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
            display: block;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--secondary);
        }

        /* Contact Section */
        .contact-section {
            padding: 6rem 0;
            background: var(--gray-50);
        }

        .contact-form {
            background: white;
            padding: 3rem;
            border-radius: 16px;
            box-shadow: var(--shadow);
            max-width: 600px;
            margin: 0 auto;
        }

        .contact-info {
            text-align: center;
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid var(--gray-100);
        }

        .contact-links {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .contact-links a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 600;
        }

        /* Messages */
        .message {
            padding: 1rem;
            border-radius: 8px;
            margin-top: 1rem;
            display: none;
            text-align: center;
        }

        .message.success {
            background: #d1fae5;
            color: #065f46;
            border: 1px solid #a7f3d0;
        }

        .message.error {
            background: #fee2e2;
            color: #991b1b;
            border: 1px solid #fecaca;
        }

        .message.show {
            display: block;
        }

        /* Loading */
        .loading {
            display: none;
            width: 20px;
            height: 20px;
            border: 2px solid #f3f3f3;
            border-top: 2px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-left: 0.5rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Footer */
        footer {
            background: var(--gray-900);
            color: white;
            padding: 3rem 0 1rem;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-section h3 {
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .footer-section a {
            color: #94a3b8;
            text-decoration: none;
            display: block;
            margin-bottom: 0.5rem;
            transition: color 0.3s ease;
        }

        .footer-section a:hover {
            color: white;
        }

        .footer-bottom {
            border-top: 1px solid #374151;
            padding-top: 2rem;
            text-align: center;
            color: #94a3b8;
        }

        /* Floating Chatbot */
        .floating-chatbot {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: linear-gradient(135deg, #FF6B00, #FF4500);
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 50px;
            font-weight: 600;
            box-shadow: 0 8px 32px rgba(255, 107, 0, 0.3);
            z-index: 1000;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .floating-chatbot:hover {
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 12px 48px rgba(255, 107, 0, 0.4);
        }

        /* Chatbot Modal */
        .chatbot-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1998;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .chatbot-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .chatbot-modal {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 400px;
            height: 600px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
            z-index: 1999;
            transform: translateY(100%) scale(0.8);
            opacity: 0;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .chatbot-modal.active {
            transform: translateY(0) scale(1);
            opacity: 1;
        }

        .chatbot-header {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 1rem 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chatbot-title {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
        }

        .chatbot-icon {
            font-size: 1.2rem;
        }

        .chatbot-close {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s ease;
        }

        .chatbot-close:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .chatbot-messages {
            flex: 1;
            padding: 1rem;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            background: var(--gray-50);
        }

        .chatbot-messages .message {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
            max-width: 80%;
        }

        .chatbot-messages .bot-message {
            align-self: flex-start;
            align-items: flex-start;
            text-align: left;
        }

        .chatbot-messages .user-message {
            align-self: flex-end;
            align-items: flex-end;
            text-align: right;
        }

        .chatbot-messages .message-content {
            padding: 0.8rem 1rem;
            border-radius: 18px;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .chatbot-messages .bot-message .message-content {
            background: white;
            color: var(--gray-900);
            border-bottom-left-radius: 6px;
            text-align: left;
        }

        .chatbot-messages .user-message .message-content {
            background: var(--primary);
            color: white;
            border-bottom-right-radius: 6px;
            text-align: right;
        }

        .chatbot-messages .message-time {
            font-size: 0.7rem;
            color: var(--secondary);
            padding: 0 0.5rem;
        }

        .chatbot-messages .bot-message .message-time {
            text-align: left;
        }

        .chatbot-messages .user-message .message-time {
            text-align: right;
        }

        .chatbot-input {
            padding: 1rem;
            border-top: 1px solid var(--gray-100);
            display: flex;
            gap: 0.5rem;
            align-items: center;
            background: white;
        }

        .chatbot-input input {
            flex: 1;
            padding: 0.8rem 1rem;
            border: 1px solid var(--gray-200);
            border-radius: 20px;
            font-size: 0.9rem;
            outline: none;
            transition: border-color 0.3s ease;
        }

        .chatbot-input input:focus {
            border-color: var(--primary);
        }

        .chatbot-input button {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: none;
            background: var(--primary);
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .chatbot-input button:hover {
            background: var(--primary-dark);
            transform: scale(1.1);
        }

        .chatbot-loading {
            padding: 1rem;
            border-top: 1px solid var(--gray-100);
            background: white;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            color: var(--secondary);
        }

        .typing-indicator {
            display: flex;
            gap: 0.2rem;
        }

        .typing-indicator span {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: var(--primary);
            animation: typing 1.4s infinite;
        }

        .typing-indicator span:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-indicator span:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
            }
            30% {
                transform: translateY(-10px);
            }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }

            .hero-content {
                grid-template-columns: 1fr;
                text-align: center;
            }

            .hero-text h1 {
                font-size: 2.5rem;
            }

            .about-content {
                grid-template-columns: 1fr;
                text-align: center;
            }

            .email-form {
                flex-direction: column;
            }

            .container {
                padding: 0 1rem;
            }

            .service-card.featured {
                transform: none;
            }

            .testimonial-card {
                height: auto;
                min-height: auto;
                padding: 1rem;
            }

            .carousel-container {
                max-width: 100%;
                padding: 0 1rem;
            }

            .testimonial-slide {
                flex: 0 0 300px;
                padding: 0 0.5rem;
            }

            .testimonial-slide.active {
                flex: 0 0 350px;
            }

            .carousel-btn {
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
            }

            .automation-flow {
                flex-direction: column;
                gap: 1rem;
            }

            .flow-arrow {
                transform: rotate(90deg);
            }

            .process-row {
                flex-direction: column;
                gap: 0.5rem;
            }

            .process-item {
                padding: 0.6rem 0.4rem;
            }

            .process-item span {
                font-size: 0.75rem;
            }

            .metrics-grid {
                grid-template-columns: 1fr;
                gap: 0.5rem;
            }

            .metric-card {
                padding: 0.8rem 0.6rem;
            }

            .metric-card .metric-number {
                font-size: 1.2rem;
            }

            .metric-card .metric-label {
                font-size: 0.7rem;
            }

            .chatbot-modal {
                bottom: 0;
                right: 0;
                width: 100vw;
                height: 100vh;
                border-radius: 0;
            }

            .floating-chatbot {
                bottom: 1rem;
                right: 1rem;
                padding: 0.8rem 1.2rem;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <a href="#" class="logo">BZM</a>
            <ul class="nav-links">
                <li><a href="#calculator">Calculateur</a></li>
                <li><a href="#services">Services</a></li>
                <li><a href="#testimonials">Témoignages</a></li>
                <li><a href="#about">À propos</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
            <a href="https://calendar.app.google/vaCEdgHuR2Ffdrp3A" class="nav-cta" target="_blank">Réserver un appel</a>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <div class="hero-content">
                <div class="hero-text">
                    <h1>Automatisez vos processus avec <span class="highlight">l'Intelligence Artificielle</span></h1>
                    <p>Manager débordé ? Automatisez vos processus répétitifs et récupérez des heures précieuses pour diriger et vous concentrer sur l'essentiel de votre métier. Je suis Expert <a href="https://www.make.com/en/register?pc=nocodeops" target="_blank" style="color: var(--primary); text-decoration: underline;">Make</a> Certifié niveau 5 - outils d'automatisation dopé à l'IA - basé en Suisse en Valais.</p>
                    <div class="hero-cta">
                        <a href="#calculator" class="btn btn-primary">Calculer mes économies</a>
                        <a href="https://calendar.app.google/vaCEdgHuR2Ffdrp3A" class="btn btn-secondary" target="_blank">Audit gratuit</a>
                    </div>
                    <div class="credentials">
                        <div class="credential">
                            <span class="icon">★</span>
                            <span>Make Expert Niveau 5</span>
                        </div>
                        <div class="credential">
                            <span class="icon">🚀</span>
                            <span>3x Entrepreneur</span>
                        </div>
                        <div class="credential">
                            <span class="icon">📅</span>
                            <span>12+ ans d'expérience</span>
                        </div>
                    </div>
                </div>
                <div class="hero-image">
                    <img src="https://images.unsplash.com/photo-1460925895917-afdab827c52f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80" alt="Automatisation et Intelligence Artificielle" />
                </div>
            </div>
        </div>
    </section>

    <!-- Calculator Section -->
    <section class="calculator-section" id="calculator">
        <div class="container">
            <div class="section-header">
                <h2>Calculateur de Temps Économisé</h2>
                <p>Découvrez combien d'heures vous pourriez récupérer chaque semaine grâce à l'automatisation</p>
            </div>
            
            <div class="calculator-card">
                <form id="calculatorForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="employees">Nombre d'employés</label>
                            <select id="employees" required>
                                <option value="">Sélectionnez...</option>
                                <option value="1-5">1-5 employés</option>
                                <option value="6-15">6-15 employés</option>
                                <option value="16-50">16-50 employés</option>
                                <option value="50+">Plus de 50 employés</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="emails">Emails traités par jour</label>
                            <input type="number" id="emails" placeholder="Ex: 50" min="1" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="documents">Documents rédigés par semaine</label>
                            <input type="number" id="documents" placeholder="Ex: 10" min="1" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="processes">Principal processus répétitif</label>
                            <select id="processes" required>
                                <option value="">Sélectionnez...</option>
                                <option value="facturation">Facturation</option>
                                <option value="rh">Gestion RH</option>
                                <option value="commercial">Suivi commercial</option>
                                <option value="reporting">Reporting</option>
                                <option value="maintenance">Maintenance</option>
                            </select>
                        </div>
                    </div>
                    
                    <button type="submit" class="btn btn-primary" style="width: 100%;">
                        Calculer mes économies
                        <span class="loading" id="calcLoading"></span>
                    </button>
                </form>
                
                <div class="calculator-result" id="calculatorResult">
                    <div class="result-main" id="resultHours">0</div>
                    <div class="result-label">heures économisées par semaine</div>
                    <div class="result-details">
                        <p><strong>Équivalent mensuel :</strong></p>
                        <p id="resultEquivalent">0 journées de travail</p>
                        <p id="resultValue">0 CHF économisés</p>
                    </div>
                    
                    <div class="email-capture" id="emailCapture">
                        <h3>Recevez votre plan d'action personnalisé</h3>
                        <p>+ Les slides de ma formation CVPS sur l'automatisation IA</p>
                        <form class="email-form" id="emailForm">
                            <input type="email" placeholder="Votre email professionnel" required id="emailInput">
                            <button type="submit" style="font-size: 1.1rem; font-weight: 700;">
                                Recevoir maintenant
                                <span class="loading" id="emailLoading"></span>
                            </button>
                        </form>
                    </div>
                </div>
                
                <div class="message success" id="successMessage">
                    Email envoyé ! Vérifiez votre boîte de réception.
                </div>
                <div class="message error" id="errorMessage">
                    Une erreur s'est produite. Contactez-moi directement.
                </div>
            </div>
        </div>
    </section>

    <!-- Services Section -->
    <section class="services-section" id="services">
        <div class="container">
            <div class="section-header">
                <h2>Mes Services d'Automatisation</h2>
                <p>Du simple au complexe, choisissez l'accompagnement qui correspond à vos besoins</p>
            </div>
            
            <div class="services-grid">
                <div class="service-card">
                    <div class="service-badge">Nouveau client</div>
                    <h3>Audit Personnalisé</h3>
                    <div class="service-price">
                        <span class="original">800</span>500 CHF
                    </div>
                    <ul class="service-features">
                        <li>Analyse complète d'un processus</li>
                        <li>Plan d'action prioritaire</li>
                        <li>Estimation ROI détaillée</li>
                        <li>2h de consultation</li>
                        <li>Rapport livré sous 48h</li>
                    </ul>
                    <a href="https://buy.stripe.com/4gMaEYaLbbEo9pf3nx2kw0l" class="btn btn-primary" style="width: 100%; text-align: center; text-decoration: none;" target="_blank">Acheter l'audit</a>
                </div>
                
                <div class="service-card featured">
                    <div class="service-badge">Populaire</div>
                    <h3>Programme Quick Win</h3>
                    <div class="service-price">
                        <span class="original">1800</span>1200 CHF
                    </div>
                    <ul class="service-features">
                        <li>Audit initial inclus</li>
                        <li>Automatisation d'1 processus critique</li>
                        <li>2 sessions de mise en place</li>
                        <li>Template prêt à l'emploi</li>
                        <li>Support 1 mois</li>
                        <li>Formation personnelle</li>
                    </ul>
                    <a href="https://buy.stripe.com/dRm8wQ9H7bEo8lbe2b2kw0m" class="btn btn-primary" style="width: 100%; text-align: center; text-decoration: none;" target="_blank">Acheter Quick Win</a>
                </div>
                
                <div class="service-card">
                    <div class="service-badge">Premium</div>
                    <h3>Transformation Complète</h3>
                    <div class="service-price">
                        <span class="original">4000</span>2500 CHF
                    </div>
                    <ul class="service-features">
                        <li>Programme Quick Win inclus</li>
                        <li>Automatisation de 2-3 processus</li>
                        <li>Templates prêts à l'emploi</li>
                        <li>Support 3 mois</li>
                        <li>Formation personnelle</li>
                        <li>Intégration IA générative</li>
                    </ul>
                    <a href="https://buy.stripe.com/8x2dRa4mNaAk44VaPZ2kw0n" class="btn btn-primary" style="width: 100%; text-align: center; text-decoration: none;" target="_blank">Acheter Transformation</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Testimonials Section -->
    <section class="testimonials-section" id="testimonials">
        <div class="container">
            <div class="section-header">
                <h2>Ils m'ont fait confiance</h2>
                <p>Découvrez comment j'ai aidé ces entreprises à automatiser leurs processus et gagner du temps</p>
            </div>

            <div class="testimonials-carousel">
                <div class="carousel-container">
                    <div class="carousel-track" id="carouselTrack">
                        <!-- Témoignage Christine Fuentes -->
                        <div class="testimonial-slide">
                            <div class="testimonial-card">
                                <div class="testimonial-header">
                                    <div class="client-info">
                                        <div class="client-photo">
                                            <div class="placeholder-photo">CF</div>
                                        </div>
                                        <div>
                                            <h4>Christine Fuentes</h4>
                                            <p>Entrepreneur</p>
                                            <a href="https://www.tonjobensuisse.com/" class="client-website" target="_blank">🔗 www.tonjobensuisse.com</a>
                                        </div>
                                    </div>
                                    <div class="rating">
                                        <div class="stars">★★★★★</div>
                                        <span class="rating-number">5.0/5</span>
                                    </div>
                                </div>

                                <div class="testimonial-content">
                                    <div class="testimonial-full">
                                        <p>"J'ai fait appel à Baptiste dans le cadre d'un lancement d'une nouvelle offre. J'avais besoin de créer toute une automatisation pour relier différents outils entre eux et fluidifier le process d'achat de mon parcours client.</p>
                                        <p>Baptiste a rapidement compris mes besoins et a réussi à créer l'automatisation dans des délais relativement courts. C'est quelqu'un qui fait preuve d'une grand professionnalisme et qui est toujours soucieux du détail, en plus d'être orienté solutions.</p>
                                        <p><strong>Grâce à lui, mon lancement s'est très bien passé. Gain de temps et sérénité au rendez-vous.</strong>"</p>
                                    </div>
                                </div>

                                <div class="services-tag">
                                    <span>Automatisation de processus • Lancement produit</span>
                                </div>
                            </div>
                        </div>

                        <!-- Témoignage David Davinroy -->
                        <div class="testimonial-slide active">
                            <div class="testimonial-card">
                                <div class="testimonial-header">
                                    <div class="client-info">
                                        <div class="company-logo bao-logo">
                                            <span class="logo-text">BAO<br>CANTEEN</span>
                                        </div>
                                        <div>
                                            <h4>David Davinroy</h4>
                                            <p>Bao Canteen</p>
                                            <a href="https://www.local.ch/fr/d/geneve/1205/karaoke/bao-canteen-tT-EUODlVxbCU_O_pT3Wgg" class="client-website" target="_blank">🔗 Voir l'établissement</a>
                                        </div>
                                    </div>
                                    <div class="rating">
                                        <div class="stars">★★★★★</div>
                                        <span class="rating-number">4.9/5</span>
                                    </div>
                                </div>

                                <div class="testimonial-content">
                                    <div class="testimonial-full">
                                        <p>"Pendant son mandat au sein de notre entreprise, M. EL MEDDEB a démontré des compétences exceptionnelles en matière de gestion opérationnelle. Il a été un acteur essentiel dans la simplification des processus métier, allant des principes de tenue des établissements jusqu'à la facturation client.</p>
                                        <p>Par exemple, son implication a été cruciale dans la mise en place réussie du Knowledge Management, témoignant de sa capacité à résoudre des défis complexes.</p>
                                        <p>Une de ses contributions également notables a été la création réussie d'une plateforme de réservation automatique pour les événements privatifs tels que les soirées stand-up ou karaoké. Cette initiative novatrice a permis d'élargir notre base de clients et de générer des revenus additionnels à notre activité principale."</p>
                                    </div>
                                </div>

                                <div class="services-tag">
                                    <span>Automatisation des réservations • Gestion documentaire • Reporting</span>
                                </div>
                            </div>
                        </div>

                        <!-- Référence David Pivodat - Airloop -->
                        <div class="testimonial-slide">
                            <div class="testimonial-card reference-card">
                                <div class="testimonial-header">
                                    <div class="client-info">
                                        <div class="company-logo airloop-logo">
                                            <span class="logo-text">AIRLOOP</span>
                                        </div>
                                        <div>
                                            <h4>David Pivodat</h4>
                                            <p>Airloop.ch</p>
                                            <a href="https://www.airloop.ch" class="client-website" target="_blank">🔗 www.airloop.ch</a>
                                        </div>
                                    </div>
                                    <div class="rating">
                                        <div class="stars">★★★★☆</div>
                                        <span class="rating-number">4.8/5</span>
                                    </div>
                                </div>

                                <div class="project-showcase">
                                    <!-- Processus d'automatisation complet -->
                                    <div class="automation-processes">
                                        <div class="process-row">
                                            <div class="process-item">
                                                <div class="process-icon">📧</div>
                                                <span>Emails entrants</span>
                                            </div>
                                            <div class="process-item">
                                                <div class="process-icon">🔍</div>
                                                <span>Classification IA</span>
                                            </div>
                                            <div class="process-item">
                                                <div class="process-icon">📤</div>
                                                <span>Réponses auto</span>
                                            </div>
                                        </div>
                                        <div class="process-row">
                                            <div class="process-item">
                                                <div class="process-icon">📋</div>
                                                <span>Tickets support</span>
                                            </div>
                                            <div class="process-item">
                                                <div class="process-icon">🔄</div>
                                                <span>Workflows</span>
                                            </div>
                                            <div class="process-item">
                                                <div class="process-icon">📊</div>
                                                <span>Analytics</span>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="metrics-grid">
                                        <div class="metric-card">
                                            <span class="metric-number">85%</span>
                                            <span class="metric-label">Emails automatisés</span>
                                        </div>
                                        <div class="metric-card">
                                            <span class="metric-number">12h</span>
                                            <span class="metric-label">Temps économisé/sem.</span>
                                        </div>
                                        <div class="metric-card">
                                            <span class="metric-number">1'920</span>
                                            <span class="metric-label">CHF économisés/mois</span>
                                        </div>
                                        <div class="metric-card">
                                            <span class="metric-number">45%</span>
                                            <span class="metric-label">Temps de réponse réduit</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="services-tag">
                                    <span>Gestion des emails entrants et sortants automatisés</span>
                                </div>
                            </div>
                        </div>

                        <!-- Référence Emma Breiner - Génie Culturel -->
                        <div class="testimonial-slide">
                            <div class="testimonial-card reference-card">
                                <div class="testimonial-header">
                                    <div class="client-info">
                                        <div class="company-logo genie-logo">
                                            <img src="https://www.genieculturel.ch/wp-content/uploads/2022/12/logo-final-web.png" alt="Génie Culturel" />
                                        </div>
                                        <div>
                                            <h4>Emma Breiner</h4>
                                            <p>Génie Culturel</p>
                                            <a href="https://www.genieculturel.ch" class="client-website" target="_blank">🔗 www.genieculturel.ch</a>
                                        </div>
                                    </div>
                                    <div class="rating">
                                        <div class="stars">★★★★★</div>
                                        <span class="rating-number">4.7/5</span>
                                    </div>
                                </div>

                                <div class="project-showcase">
                                    <!-- Processus d'automatisation complet -->
                                    <div class="automation-processes">
                                        <div class="process-row">
                                            <div class="process-item">
                                                <div class="process-icon">📊</div>
                                                <span>Reporting auto</span>
                                            </div>
                                            <div class="process-item">
                                                <div class="process-icon">📋</div>
                                                <span>Contrats IA</span>
                                            </div>
                                            <div class="process-item">
                                                <div class="process-icon">👥</div>
                                                <span>Planning RH</span>
                                            </div>
                                        </div>
                                        <div class="process-row">
                                            <div class="process-item">
                                                <div class="process-icon">🔧</div>
                                                <span>Maintenance</span>
                                            </div>
                                            <div class="process-item">
                                                <div class="process-icon">📅</div>
                                                <span>Calendrier</span>
                                            </div>
                                            <div class="process-item">
                                                <div class="process-icon">💼</div>
                                                <span>Gestion projets</span>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="metrics-grid">
                                        <div class="metric-card">
                                            <span class="metric-number">6</span>
                                            <span class="metric-label">Processus automatisés</span>
                                        </div>
                                        <div class="metric-card">
                                            <span class="metric-number">20h</span>
                                            <span class="metric-label">Temps économisé/mois</span>
                                        </div>
                                        <div class="metric-card">
                                            <span class="metric-number">1'600</span>
                                            <span class="metric-label">CHF économisés/mois</span>
                                        </div>
                                        <div class="metric-card">
                                            <span class="metric-number">70%</span>
                                            <span class="metric-label">Tâches admin réduites</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="services-tag">
                                    <span>Reporting • Contrats • RH • Maintenance • Projets</span>
                                </div>
                            </div>
                        </div>

                        <!-- Duplication pour l'effet infini -->
                        <!-- Témoignage Christine Fuentes - Dupliqué -->
                        <div class="testimonial-slide">
                            <div class="testimonial-card">
                                <div class="testimonial-header">
                                    <div class="client-info">
                                        <div class="client-photo">
                                            <div class="placeholder-photo">CF</div>
                                        </div>
                                        <div>
                                            <h4>Christine Fuentes</h4>
                                            <p>Entrepreneur</p>
                                            <a href="https://www.tonjobensuisse.com/" class="client-website" target="_blank">🔗 www.tonjobensuisse.com</a>
                                        </div>
                                    </div>
                                    <div class="rating">
                                        <div class="stars">★★★★★</div>
                                        <span class="rating-number">5.0/5</span>
                                    </div>
                                </div>

                                <div class="testimonial-content">
                                    <div class="testimonial-full">
                                        <p>"J'ai fait appel à Baptiste dans le cadre d'un lancement d'une nouvelle offre. J'avais besoin de créer toute une automatisation pour relier différents outils entre eux et fluidifier le process d'achat de mon parcours client.</p>
                                        <p>Baptiste a rapidement compris mes besoins et a réussi à créer l'automatisation dans des délais relativement courts. C'est quelqu'un qui fait preuve d'une grand professionnalisme et qui est toujours soucieux du détail, en plus d'être orienté solutions.</p>
                                        <p><strong>Grâce à lui, mon lancement s'est très bien passé. Gain de temps et sérénité au rendez-vous.</strong>"</p>
                                    </div>
                                </div>

                                <div class="services-tag">
                                    <span>Automatisation de processus • Lancement produit</span>
                                </div>
                            </div>
                        </div>

                        <!-- Témoignage David Davinroy - Dupliqué -->
                        <div class="testimonial-slide">
                            <div class="testimonial-card">
                                <div class="testimonial-header">
                                    <div class="client-info">
                                        <div class="company-logo bao-logo">
                                            <span class="logo-text">BAO<br>CANTEEN</span>
                                        </div>
                                        <div>
                                            <h4>David Davinroy</h4>
                                            <p>Bao Canteen</p>
                                            <a href="https://www.local.ch/fr/d/geneve/1205/karaoke/bao-canteen-tT-EUODlVxbCU_O_pT3Wgg" class="client-website" target="_blank">🔗 Voir l'établissement</a>
                                        </div>
                                    </div>
                                    <div class="rating">
                                        <div class="stars">★★★★★</div>
                                        <span class="rating-number">4.9/5</span>
                                    </div>
                                </div>

                                <div class="testimonial-content">
                                    <div class="testimonial-full">
                                        <p>"Pendant son mandat au sein de notre entreprise, M. EL MEDDEB a démontré des compétences exceptionnelles en matière de gestion opérationnelle. Il a été un acteur essentiel dans la simplification des processus métier, allant des principes de tenue des établissements jusqu'à la facturation client.</p>
                                        <p>Par exemple, son implication a été cruciale dans la mise en place réussie du Knowledge Management, témoignant de sa capacité à résoudre des défis complexes.</p>
                                        <p>Une de ses contributions également notables a été la création réussie d'une plateforme de réservation automatique pour les événements privatifs tels que les soirées stand-up ou karaoké. Cette initiative novatrice a permis d'élargir notre base de clients et de générer des revenus additionnels à notre activité principale."</p>
                                    </div>
                                </div>

                                <div class="services-tag">
                                    <span>Automatisation des réservations • Gestion documentaire • Reporting</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="carousel-navigation">
                    <button class="carousel-btn prev-btn" onclick="moveCarousel(-1)">‹</button>
                    <div class="carousel-dots" id="carouselDots"></div>
                    <button class="carousel-btn next-btn" onclick="moveCarousel(1)">›</button>
                </div>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section class="about-section" id="about">
        <div class="container">
            <div class="about-content">
                <div class="about-image">
                    <img src="https://creatorspace.imgix.net/users/cle5w645j01mco20yp5z6hu0t/IrUZ3O3bnaNA88Yg-3-BW.png?w=300&h=300" alt="Baptiste Zyed MEDDEB" />
                </div>
                <div class="about-text">
                    <h2>Baptiste Zyed MEDDEB</h2>
                    <div class="role">Expert Automatisation IA & Entrepreneur Serial</div>
                    <p>Basé en Suisse (Valais), je suis un entrepreneur expérimenté avec 12+ années dans l'écosystème startup et business. Après avoir créé 3 entreprises (dont 1 exit réussi), je me suis spécialisé dans l'automatisation intelligente des processus métier.</p>
                    <p><strong>Ma mission :</strong> Libérer les entrepreneurs des tâches répétitives pour qu'ils puissent se concentrer sur ce qui compte vraiment - développer leur business et créer de la valeur.</p>
                    <p>Expert Make certifié niveau 5 (le plus haut niveau), je maîtrise l'écosystème complet de l'automatisation : IA, no-code, intégrations API, workflows complexes.</p>
                    
                    <div class="stats-grid">
                        <div class="stat-item">
                            <span class="stat-number">12+</span>
                            <span class="stat-label">Années d'expérience</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number">3</span>
                            <span class="stat-label">Entreprises créées</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number">Niv. 5</span>
                            <span class="stat-label">Certification Make</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number">1</span>
                            <span class="stat-label">Exit réussi</span>
                        </div>
                    </div>
                    
                    <div style="margin-top: 2rem;">
                        <a href="tel:+41793017915" class="btn btn-secondary" style="margin-right: 1rem;">+41 79 301 79 15</a>
                        <a href="https://calendar.app.google/vaCEdgHuR2Ffdrp3A" class="btn btn-primary" target="_blank">Réserver un appel</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section class="contact-section" id="contact">
        <div class="container">
            <div class="section-header">
                <h2>Prêt à automatiser votre entreprise ?</h2>
                <p>Contactez-moi pour discuter de votre projet d'automatisation</p>
            </div>
            
            <div class="contact-form">
                <form id="contactForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="name">Nom et Prénom *</label>
                            <input type="text" id="name" name="name" required placeholder="Votre nom complet">
                        </div>
                        
                        <div class="form-group">
                            <label for="email_contact">Email professionnel *</label>
                            <input type="email" id="email_contact" name="email" required placeholder="votre@email.com">
                        </div>
                        
                        <div class="form-group">
                            <label for="company">Entreprise</label>
                            <input type="text" id="company" name="company" placeholder="Nom de votre entreprise">
                        </div>
                        
                        <div class="form-group">
                            <label for="service">Service qui vous intéresse *</label>
                            <select id="service" name="service" required>
                                <option value="">Sélectionnez...</option>
                                <option value="audit">Audit Personnalisé (500 CHF)</option>
                                <option value="quickwin">Programme Quick Win (1200 CHF)</option>
                                <option value="transformation">Transformation Complète (2500 CHF)</option>
                                <option value="question">J'ai une question / Autre</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="message">Décrivez brièvement vos besoins *</label>
                            <textarea id="message" name="message" rows="4" required placeholder="Quels processus aimeriez-vous automatiser ? Quels sont vos principaux défis ?"></textarea>
                        </div>
                    </div>
                    
                    <button type="submit" class="btn btn-primary" style="width: 100%; text-align: center;">
                        Envoyer ma demande
                        <span class="loading" id="contactLoading"></span>
                    </button>
                </form>
                
                <div class="message success" id="contactSuccess">
                    Message envoyé ! Je vous recontacte dans les 24h.
                </div>
                
                <div class="message error" id="contactError">
                    Erreur lors de l'envoi. Contactez-moi directement.
                </div>
                
                <div class="contact-info">
                    <p>Ou contactez-moi directement :</p>
                    <div class="contact-links">
                        <a href="tel:+41793017915">+41 79 301 79 15</a>
                        <a href="mailto:zyed.elmeddeb@gmail.com">zyed.elmeddeb@gmail.com</a>
                    </div>
                    <p style="margin-top: 1rem; color: var(--secondary);">Route du Manège 60, 1950 Sion</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Baptiste Zyed MEDDEB</h3>
                    <p>Expert en automatisation des processus métier avec l'Intelligence Artificielle. Basé en Suisse.</p>
                    <div style="margin-top: 1rem;">
                        <a href="https://bento.me/bzmeddeb" target="_blank" style="display: block; margin-bottom: 0.5rem;">Mon profil complet >></a>
                        <a href="https://www.linkedin.com/in/bzmeddeb/" target="_blank" style="display: inline-flex; align-items: center; justify-content: center; width: 40px; height: 40px; background: #0077b5; border-radius: 8px; color: white; text-decoration: none; transition: all 0.3s ease;" onmouseover="this.style.background='#005885'" onmouseout="this.style.background='#0077b5'">
                            <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                            </svg>
                        </a>
                    </div>
                </div>
                
                <div class="footer-section">
                    <h3>Services</h3>
                    <a href="#services">Audit Personnalisé</a>
                    <a href="#services">Programme Quick Win</a>
                    <a href="#services">Transformation Complète</a>
                    <a href="https://calendar.app.google/vaCEdgHuR2Ffdrp3A" target="_blank">Consultation Gratuite</a>
                </div>
                
                <div class="footer-section">
                    <h3>Solutions</h3>
                    <a href="#calculator">Calculateur d'économies</a>
                    <p>Rédaction automatique</p>
                    <p>Gestion des emails</p>
                    <p>Workflows automatisés</p>
                </div>
                
                <div class="footer-section">
                    <h3>Contact</h3>
                    <a href="tel:+41793017915">+41 79 301 79 15</a>
                    <a href="mailto:zyed.elmeddeb@gmail.com">zyed.elmeddeb@gmail.com</a>
                    <p>Route du Manège 60, 1950 Sion</p>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2025 Baptiste Zyed MEDDEB - Expert Automatisation IA. Tous droits réservés.</p>
            </div>
        </div>
    </footer>

    <!-- Floating ChatBot -->
    <div class="floating-chatbot" onclick="toggleChatbot()">
        🤖 ChatBot IA
    </div>

    <!-- Chatbot Modal -->
    <div class="chatbot-modal" id="chatbotModal">
        <div class="chatbot-header">
            <div class="chatbot-title">
                <span class="chatbot-icon">🤖</span>
                <span>Assistant IA - Baptiste</span>
            </div>
            <button class="chatbot-close" onclick="closeChatbot()">×</button>
        </div>
        <div class="chatbot-messages" id="chatbotMessages">
            <div class="message bot-message">
                <div class="message-content">
                    Bonjour ! Je suis l'assistant IA de Baptiste. Comment puis-je vous aider avec vos projets d'automatisation ?
                </div>
                <div class="message-time">Maintenant</div>
            </div>
        </div>
        <div class="chatbot-input">
            <input type="text" id="chatbotInput" placeholder="Tapez votre message..." />
            <button id="chatbotSend" onclick="sendMessage()">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                </svg>
            </button>
        </div>
        <div class="chatbot-loading" id="chatbotLoading" style="display: none;">
            <div class="typing-indicator">
                <span></span>
                <span></span>
                <span></span>
            </div>
            Baptiste est en train d'écrire...
        </div>
    </div>

    <!-- Chatbot Overlay -->
    <div class="chatbot-overlay" id="chatbotOverlay" onclick="closeChatbot()"></div>

    <script>
        // Fonction de test simple
        window.initiateStripeCheckout = function(serviceType) {
            console.log('🚀 Bouton cliqué pour:', serviceType);
            alert('Bouton fonctionne ! Service: ' + serviceType);
            
            // Scroll vers le formulaire de contact
            document.getElementById('contact').scrollIntoView({ behavior: 'smooth' });
            
            // Pré-remplir le formulaire
            setTimeout(() => {
                const serviceSelect = document.getElementById('service');
                if (serviceSelect) {
                    serviceSelect.value = serviceType;
                }
            }, 500);
        };
        
        // Configuration Supabase (déplacée vers window.ENV)
        const SUPABASE_URL = (window.ENV && window.ENV.SUPABASE_URL) || '';
        const SUPABASE_ANON_KEY = (window.ENV && window.ENV.SUPABASE_ANON_KEY) || '';
        
        if (!SUPABASE_URL || !SUPABASE_ANON_KEY) {
            console.warn('Supabase non configuré: renseignez SUPABASE_URL et SUPABASE_ANON_KEY dans config.js');
        }
        
        // Initialize Supabase client
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
        
        // Session ID pour analytics
        const sessionId = 'session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);

        // Smooth scrolling pour les liens internes
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Fonctions utilitaires
        function showLoading(elementId, show = true) {
            const loading = document.getElementById(elementId);
            if (loading) {
                loading.style.display = show ? 'inline-block' : 'none';
            }
        }

        function showMessage(elementId, show = true) {
            const message = document.getElementById(elementId);
            if (message) {
                if (show) {
                    message.classList.add('show');
                    setTimeout(() => message.classList.remove('show'), 5000);
                } else {
                    message.classList.remove('show');
                }
            }
        }

        async function trackEvent(eventType, eventData = {}) {
            try {
                // Temporairement désactivé en attendant le rafraîchissement du schéma
                // await supabase.from('page_analytics').insert({
                //     session_id: sessionId,
                //     page_path: window.location.pathname,
                //     event_type: eventType,
                //     event_data: eventData,
                //     ip_address: null, // Sera ajouté côté serveur
                //     user_agent: navigator.userAgent,
                //     referrer: document.referrer,
                //     utm_source: new URLSearchParams(window.location.search).get('utm_source'),
                //     utm_medium: new URLSearchParams(window.location.search).get('utm_medium'),
                //     utm_campaign: new URLSearchParams(window.location.search).get('utm_campaign')
                // });
            } catch (error) {
                console.log('Analytics tracking failed:', error.message);
            }
        }

        // Calculateur
        document.getElementById('calculatorForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const button = e.target.querySelector('button[type="submit"]');
            button.disabled = true;
            showLoading('calcLoading', true);
            
            try {
                const employees = document.getElementById('employees').value;
                const emails = parseInt(document.getElementById('emails').value);
                const documents = parseInt(document.getElementById('documents').value);
                const processes = document.getElementById('processes').value;
                
                // Algorithme de calcul
                let timeSaved = 0;
                
                // Temps économisé sur les emails (2 min par email, 70% automatisable)
                timeSaved += (emails * 2 * 5 * 0.7) / 60;
                
                // Temps économisé sur les documents (30 min par document, 60% automatisable)
                timeSaved += (documents * 30 * 0.6) / 60;
                
                // Multiplicateur selon le type de processus
                const processMultipliers = {
                    'facturation': 8,
                    'rh': 12,
                    'commercial': 6,
                    'reporting': 10,
                    'maintenance': 4
                };
                timeSaved += processMultipliers[processes] || 5;
                
                // Multiplicateur selon la taille d'entreprise
                const employeeMultipliers = {
                    '1-5': 1,
                    '6-15': 1.5,
                    '16-50': 2.5,
                    '50+': 4
                };
                timeSaved *= employeeMultipliers[employees] || 1;
                
                // Arrondir
                timeSaved = Math.round(timeSaved);
                
                // Calculs financiers
                const monthlyValue = Math.round(timeSaved * 4.33 * 80);
                const dailyEquivalent = Math.round(timeSaved / 8 * 4.33 * 10) / 10;
                
                // Stocker les résultats
                window.calculatorResults = {
                    employees,
                    emails_per_day: emails,
                    documents_per_week: documents,
                    process_type: processes,
                    time_saved: timeSaved,
                    monthly_value: monthlyValue,
                    daily_equivalent: dailyEquivalent
                };
                
                // Afficher les résultats
                document.getElementById('resultHours').textContent = timeSaved;
                document.getElementById('resultEquivalent').textContent = `${dailyEquivalent} journées de travail`;
                document.getElementById('resultValue').textContent = `${monthlyValue.toLocaleString()} CHF économisés`;
                
                // Montrer les résultats
                document.getElementById('calculatorResult').style.display = 'block';
                setTimeout(() => {
                    document.getElementById('emailCapture').style.display = 'block';
                }, 1000);
                
                // Scroll vers les résultats
                document.getElementById('calculatorResult').scrollIntoView({
                    behavior: 'smooth',
                    block: 'center'
                });
                
                // Track événement
                trackEvent('calculator_completed', window.calculatorResults);
                
            } catch (error) {
                console.error('Erreur calculateur:', error);
                showMessage('errorMessage');
            } finally {
                button.disabled = false;
                showLoading('calcLoading', false);
            }
        });

        // Capture d'email - Appel direct au webhook Make
        document.getElementById('emailForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const button = e.target.querySelector('button[type="submit"]');
            const email = document.getElementById('emailInput').value;
            
            button.disabled = true;
            showLoading('emailLoading', true);
            
            try {
                // Appel direct au webhook Make
                const webhookData = {
                    email: email,
                    language: 'fr',
                    employees: window.calculatorResults.employees,
                    emails_per_day: window.calculatorResults.emails_per_day,
                    documents_per_week: window.calculatorResults.documents_per_week,
                    process_type: window.calculatorResults.process_type,
                    time_saved: window.calculatorResults.time_saved,
                    monthly_value: window.calculatorResults.monthly_value,
                    daily_equivalent: window.calculatorResults.daily_equivalent,
                    timestamp: new Date().toISOString(),
                    source: 'calculator'
                };

                console.log('Envoi vers Make:', webhookData);

                const response = await fetch('https://hook.eu1.make.com/2fh4mnmxx3sfi3bc7ozebhu54x91yj7v', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(webhookData)
                });

                if (response.ok) {
                    // Cacher la capture et montrer le succès
                    document.getElementById('emailCapture').style.display = 'none';
                    showMessage('successMessage');

                    // Track conversion
                    trackEvent('email_captured', { 
                        email, 
                        webhook_sent: true,
                        time_saved: window.calculatorResults.time_saved 
                    });
                } else {
                    throw new Error(`Erreur webhook: ${response.status}`);
                }

            } catch (error) {
                console.error('Erreur webhook Make:', error);
                showMessage('errorMessage');
            } finally {
                button.disabled = false;
                showLoading('emailLoading', false);
            }
        });

        // Formulaire de contact - Appel direct au webhook Make
        document.getElementById('contactForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const button = e.target.querySelector('button[type="submit"]');
            button.disabled = true;
            showLoading('contactLoading', true);
            
            try {
                const formData = new FormData(e.target);
                const contactData = Object.fromEntries(formData);
                
                // Appel direct au webhook Make
                const webhookData = {
                    email: contactData.email,
                    name: contactData.name,
                    company: contactData.company || '',
                    service: contactData.service,
                    message: contactData.message,
                    language: 'fr',
                    timestamp: new Date().toISOString(),
                    source: 'contact'
                };

                console.log('Envoi formulaire contact vers Make:', webhookData);

                const response = await fetch('https://hook.eu1.make.com/2fh4mnmxx3sfi3bc7ozebhu54x91yj7v', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(webhookData)
                });

                if (response.ok) {
                    // Afficher le succès
                    showMessage('contactSuccess');
                    e.target.reset();

                    // Track conversion
                    trackEvent('contact_form_submitted', { 
                        service: contactData.service,
                        webhook_sent: true 
                    });
                } else {
                    throw new Error(`Erreur webhook: ${response.status}`);
                }

            } catch (error) {
                console.error('Erreur webhook Make contact:', error);
                showMessage('contactError');
            } finally {
                button.disabled = false;
                showLoading('contactLoading', false);
            }
        });

        // Track page view
        trackEvent('page_view', {
            page: window.location.pathname,
            referrer: document.referrer
        });

        // Track scroll depth
        let maxScrollDepth = 0;
        window.addEventListener('scroll', function() {
            const scrollDepth = Math.round((window.scrollY / (document.body.scrollHeight - window.innerHeight)) * 100);
            if (scrollDepth > maxScrollDepth && scrollDepth % 25 === 0) {
                maxScrollDepth = scrollDepth;
                trackEvent('scroll_depth', { depth: scrollDepth });
            }
        });

        // Track clicks externes
        document.addEventListener('click', function(e) {
            if (e.target.tagName === 'A' && e.target.href) {
                if (e.target.href.includes('calendar.app.google')) {
                    trackEvent('calendly_click', { source: e.target.textContent });
                } else if (e.target.href.includes('mailto:')) {
                    trackEvent('email_click', { email: e.target.href.replace('mailto:', '') });
                } else if (e.target.href.includes('tel:')) {
                    trackEvent('phone_click', { phone: e.target.href.replace('tel:', '') });
                }
            }
        });

        // Stripe Configuration
        const STRIPE_PUBLISHABLE_KEY = (window.ENV && window.ENV.STRIPE_PUBLISHABLE_KEY) || '';
        const STRIPE_PRODUCTS = (window.ENV && window.ENV.STRIPE_PRODUCTS) || {};
        
        if (!STRIPE_PUBLISHABLE_KEY || STRIPE_PUBLISHABLE_KEY.includes('...')) {
            console.warn('⚠️ Stripe non configuré: renseignez STRIPE_PUBLISHABLE_KEY dans config.js');
        }
        
        // Initialize Stripe
        const stripe = Stripe(STRIPE_PUBLISHABLE_KEY);
        

        // Carousel functionality
        let currentSlide = 1; // Start at middle position (index 1)
        const totalSlides = 4;
        let autoScrollInterval = null;
        let isUserInteracting = false;

        function initCarousel() {
            const dotsContainer = document.getElementById('carouselDots');

            // Create dots
            for (let i = 0; i < totalSlides; i++) {
                const dot = document.createElement('div');
                dot.className = 'dot';
                if (i === currentSlide) dot.classList.add('active');
                dot.addEventListener('click', () => goToSlide(i));
                dotsContainer.appendChild(dot);
            }

            updateCarousel();
            
            // Start auto-scroll after a short delay
            setTimeout(() => {
                startAutoScroll();
            }, 1000);
        }

        function moveCarousel(direction) {
            currentSlide += direction;

            if (currentSlide >= totalSlides) {
                currentSlide = 0;
            } else if (currentSlide < 0) {
                currentSlide = totalSlides - 1;
            }

            updateCarousel();
        }

        function goToSlide(slideIndex) {
            currentSlide = slideIndex;
            updateCarousel();
        }

        function updateCarousel() {
            const track = document.querySelector('.carousel-track');
            const slides = document.querySelectorAll('.testimonial-slide');
            const dots = document.querySelectorAll('.dot');
            const slideWidth = 420; // Width of each slide
            const gap = 24; // 1.5rem gap in pixels
            const containerCenter = 600; // Half of max-width 1200px

            // Calculate the offset to center the current slide
            const offset = containerCenter - (currentSlide * (slideWidth + gap) + slideWidth / 2);

            // Move the entire track
            track.style.transform = `translateX(${offset}px)`;

            // Update slide classes for styling (active card gets no overlay)
            slides.forEach((slide, index) => {
                slide.classList.remove('active', 'prev', 'next');

                if (index === currentSlide) {
                    slide.classList.add('active');
                } else {
                    // Add prev/next classes for gray overlay
                    if (index === currentSlide - 1 || (currentSlide === 0 && index === totalSlides - 1)) {
                        slide.classList.add('prev');
                    } else if (index === currentSlide + 1 || (currentSlide === totalSlides - 1 && index === 0)) {
                        slide.classList.add('next');
                    } else {
                        // Other slides also get overlay
                        slide.classList.add('next');
                    }
                }
            });

            // Update dots
            dots.forEach((dot, index) => {
                dot.classList.toggle('active', index === currentSlide);
            });
        }

        function startAutoScroll() {
            if (autoScrollInterval) {
                clearInterval(autoScrollInterval);
            }
            
            autoScrollInterval = setInterval(() => {
                if (!isUserInteracting) {
                    moveCarousel(1);
                }
            }, 3500); // Change slide every 3.5 seconds
        }

        function stopAutoScroll() {
            if (autoScrollInterval) {
                clearInterval(autoScrollInterval);
                autoScrollInterval = null;
            }
        }

        // Initialize carousel when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initCarousel();
            
            // Add hover events for auto-scroll control
            const carousel = document.querySelector('.testimonials-carousel');
            
            carousel.addEventListener('mouseenter', () => {
                isUserInteracting = true;
                stopAutoScroll();
            });
            
            carousel.addEventListener('mouseleave', () => {
                isUserInteracting = false;
                startAutoScroll();
            });
        });

        function toggleTestimonial(button) {
            console.log('Toggle testimonial called');
            const card = button.closest('.testimonial-card');
            const preview = card.querySelector('.testimonial-preview');
            const full = card.querySelector('.testimonial-full');

            console.log('Elements found:', { preview, full });
            const isExpanded = full.style.display === 'block';

            // Clear any existing timeout
            if (autoCollapseTimeout) {
                clearTimeout(autoCollapseTimeout);
                autoCollapseTimeout = null;
            }

            // Pause auto-scroll when expanding
            stopAutoScroll();

            if (!isExpanded) {
                // Expand
                preview.style.display = 'none';
                full.style.display = 'block';
                card.classList.add('expanded');
                button.textContent = 'Réduire';

                // Auto-collapse after 3 seconds and move to next slide
                autoCollapseTimeout = setTimeout(() => {
                    collapseTestimonial(card, button);
                    // Move to next slide after collapsing
                    setTimeout(() => {
                        moveCarousel(1);
                        startAutoScroll(); // Resume auto-scroll
                    }, 500);
                }, 3000);
            } else {
                // Manual collapse
                collapseTestimonial(card, button);
                startAutoScroll(); // Resume auto-scroll
            }
        }

        function collapseTestimonial(card, button) {
            const preview = card.querySelector('.testimonial-preview');
            const full = card.querySelector('.testimonial-full');

            preview.style.display = 'block';
            full.style.display = 'none';
            card.classList.remove('expanded');
            button.textContent = 'Lire la suite';

            // Clear timeout if exists
            if (autoCollapseTimeout) {
                clearTimeout(autoCollapseTimeout);
                autoCollapseTimeout = null;
            }
        }

        // Chatbot functionality
        let chatbotThreadId = null;

        function generateThreadId() {
            return 'thread_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
        }

        function toggleChatbot() {
            const modal = document.getElementById('chatbotModal');
            const overlay = document.getElementById('chatbotOverlay');

            if (modal.classList.contains('active')) {
                closeChatbot();
            } else {
                modal.classList.add('active');
                overlay.classList.add('active');
                document.getElementById('chatbotInput').focus();

                // ThreadID will be provided by Make.com/OpenAI on first message
                console.log('Chatbot opened. Current thread ID:', chatbotThreadId);
            }
        }

        function closeChatbot() {
            const modal = document.getElementById('chatbotModal');
            const overlay = document.getElementById('chatbotOverlay');

            modal.classList.remove('active');
            overlay.classList.remove('active');
        }

        function addMessage(content, isUser = false) {
            const messagesContainer = document.getElementById('chatbotMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user-message' : 'bot-message'}`;

            const now = new Date();
            const timeString = now.toLocaleTimeString('fr-FR', {
                hour: '2-digit',
                minute: '2-digit'
            });

            messageDiv.innerHTML = `
                <div class="message-content">${content}</div>
                <div class="message-time">${timeString}</div>
            `;

            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function showLoading(show = true) {
            const loading = document.getElementById('chatbotLoading');
            const input = document.getElementById('chatbotInput');
            const sendBtn = document.getElementById('chatbotSend');

            loading.style.display = show ? 'flex' : 'none';
            input.disabled = show;
            sendBtn.disabled = show;
        }

        async function sendMessage() {
            const input = document.getElementById('chatbotInput');
            const message = input.value.trim();

            if (!message) return;

            // Add user message
            addMessage(message, true);
            input.value = '';

            // Show loading
            showLoading(true);

            try {
                // Send to Make.com webhook
                const response = await fetch('https://hook.eu1.make.com/16iycniehsxgvovrkfhisp2i8ih947bd', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        message: message,
                        threadId: chatbotThreadId || null,
                        timestamp: new Date().toISOString(),
                        source: 'chatbot'
                    })
                });

                if (response.ok) {
                    const result = await response.text();
                    console.log('Raw webhook response:', result);

                    try {
                        // Clean and fix malformed JSON
                        let cleanResult = result.trim();

                        // Fix common JSON malformation issues
                        if (cleanResult.includes('"suggestions":') && !cleanResult.includes('"suggestions": [')) {
                            // Fix malformed suggestions field
                            cleanResult = cleanResult.replace(
                                /"suggestions":\s*([^}]+)\s*}/,
                                '"suggestions": []}'
                            );
                        }

                        console.log('Cleaned result:', cleanResult);

                        // Try to parse JSON response
                        const jsonResponse = JSON.parse(cleanResult);
                        console.log('Parsed JSON response:', jsonResponse);

                        // Update threadId if provided (for first message or new thread)
                        if (jsonResponse.threadId && jsonResponse.threadId !== chatbotThreadId) {
                            chatbotThreadId = jsonResponse.threadId;
                            console.log('Updated thread ID:', chatbotThreadId);
                        }

                        // Extract only the response message and clean it
                        let botMessage = jsonResponse.response || jsonResponse.message || result;

                        // Remove references like 【4:11†Site_Web-Automatisation IA _ Baptiste Zyed MEDDEB.pdf】
                        botMessage = botMessage.replace(/【[^】]*】/g, '').trim();

                        console.log('Clean bot message:', botMessage);
                        addMessage(botMessage);

                        // Handle suggestions if present and valid
                        if (jsonResponse.suggestions && Array.isArray(jsonResponse.suggestions) && jsonResponse.suggestions.length > 0) {
                            console.log('Valid suggestions received:', jsonResponse.suggestions);
                            // Future: add suggestion buttons
                        }

                    } catch (parseError) {
                        console.log('JSON parse error:', parseError);

                        // Try to extract response manually from malformed JSON
                        const responseMatch = result.match(/"response":\s*"([^"]+)"/);
                        if (responseMatch) {
                            let botMessage = responseMatch[1];
                            // Remove references
                            botMessage = botMessage.replace(/【[^】]*】/g, '').trim();
                            addMessage(botMessage);
                        } else {
                            // If not JSON, treat as plain text response
                            console.log('Response is plain text, not JSON');
                            addMessage(result || 'Merci pour votre message ! Je vous réponds dans un instant.');
                        }
                    }
                } else {
                    throw new Error(`HTTP ${response.status}`);
                }

            } catch (error) {
                console.error('Erreur webhook chatbot:', error);
                addMessage('Désolé, je rencontre un problème technique. Pouvez-vous réessayer ou me contacter directement ?');
            } finally {
                showLoading(false);
            }
        }

        // Enter key to send message
        document.addEventListener('DOMContentLoaded', function() {
            const input = document.getElementById('chatbotInput');
            if (input) {
                input.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        sendMessage();
                    }
                });
            }
        });

        console.log('🚀 Landing page chargée avec succès!');
        console.log('📊 Supabase connecté:', SUPABASE_URL);
        console.log('💳 Stripe configuré:', STRIPE_PUBLISHABLE_KEY ? 'Oui' : 'Non');
        console.log('🔗 Session ID:', sessionId);
    </script>
</body>
</html>
